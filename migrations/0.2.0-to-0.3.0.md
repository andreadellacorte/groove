# Migration: 0.2.0 → 0.3.0

## Outcome

`.groove/index.md` has the `last-version-check:` key. `.groove/.gitignore` exists and reflects the configured `git:` strategy.

## Acceptance Criteria

- `last-version-check: ""` is present in `.groove/index.md` frontmatter
- `.groove/.gitignore` exists with content matching the `git:` value in `.groove/index.md`
- No existing keys in `.groove/index.md` are modified

## Constraints

- This migration is idempotent — safe to re-run if interrupted

### Step 1 — Add `last-version-check:` to `.groove/index.md`

If `last-version-check:` key is absent from frontmatter, add it with value `""`. Insert it after the `groove-version:` line. If already present, skip.

### Step 2 — Write `.groove/.gitignore`

If `.groove/.gitignore` does not exist, read `git:` from `.groove/index.md` and write accordingly:

**`ignore-all`**:
```
*
!.gitignore
```

**`hybrid`**:
```
memory/sessions/
index.md
```

**`commit-all`**:
```
# groove git strategy: commit-all
```

If `.groove/.gitignore` already exists, skip (do not overwrite user edits).
